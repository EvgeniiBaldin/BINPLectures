-*- mode: org; coding: utf-8 -*-
** Что это?

Это запись лекций, сделанных энтузиастами. Лекции специально для
записи не готовились, но преподаватели разрешили их опубликовать от
имени Кафедры теоретической физики Новосибирского государственного
университета, что кафедра в лице её молодой составляющей не преминула
сделать.

Исходники и описание видеолекций доступны по адресу:
http://www.inp.nsk.su/students/theor/videolectures/videolectures.html

** Список лекций и семинаров

 * Теория сильных взаимодействий (лекции, профессор Фадин В.С., 
   2014 г. QCD и семинары, Резниченко А.В. 2015 г. QCDs)
 * Квантовая электродинамика (лекции, профессор Фадин В.С., 
   2013 г. QED и семинары, Резниченко А.В. 2015 г. QEDs)
 * Теория электрослабых взаимодействий (лекции, профессор Черняк В.Л.,
   2013 г. EW)
 * Суперсимметрия в квантовой теории поля (спецкурс профессора 
   Черняка В.Л., 2013 г. SUSY)
 * Физика элементарных частиц (лекции, профессор Сербо В.Г. HEP, 
   2013 г. и семинары, доцент Сковпень Ю.И., 2014 г. HEPs)
 * Избранные вопросы нелинейной и хаотической динамики. (спецкурс
   доцента Жирова О.В., 2014 г. NaCD)
 * Двухфотонная физика (лекции, профессор Сербо В.Г., 2014 г. GG)
 * Атомное ядро (лекции, профессор Дмитриев В.Ф., 2014 г. NUC)
 * Экскурсии в теорию струн (спецкурс ст. преп.,
   к.ф.-м.н. Померанского А.А., 2014 г. STR)
 * Лекции по космологии (профессор Долгов А.Д., 2015 г. ASTRO)
 * Астрофизика в Антарктиде (профессор Дэвид Бессон, 2015 г. ANTAR)
 * Python в научных вычислениях (д.ф.-м.н. Андрей Г. Грозин, 2015г.
   Python)
   https://www.youtube.com/playlist?list=PLPFUq1zn8x34Bx6CWXJyTAZVCGrJLQxlf
   + Лекция 1. Jupiter. Числа. Строки. Списки. 
     http://www.inp.nsk.su/~grozin/python/python1.html
   + Лекция 2. Кортежи. Множества. Словари. Функции.
     http://www.inp.nsk.su/~grozin/python/python2.html
     https://youtu.be/hpiDPez_wuE
   + Лекция 3. Объектно-ориентированное программирование. Исключения. 
     http://www.inp.nsk.su/~grozin/python/python3.html
   + Лекция 4. Модули. Ввод-вывод, файлы, директории.
     http://www.inp.nsk.su/~grozin/python/python4.html
     https://youtu.be/XntBAdmN_mw
   + Лекция 5. numpy. Одномерные массивы. Операции над одномерными
     массивами. 2-мерные массивы. Линейная алгебра. Преобразование
     Фурье. Интегрирование. Дифференциальные уравнения.
     http://www.inp.nsk.su/~grozin/python/python5.html
     https://youtu.be/aRwZGR4PA2w
   + Лекция 6. matplotlib. Логарифмический масштаб. Полярные
     координаты. Экпериментальные данные. Гистограмма.  Контурные
     графики. Images (пиксельные картинки). Трёхмерная
     линия. Поверхности.
     http://www.inp.nsk.su/~grozin/python/python6.html
     https://youtu.be/_LZqiJyjywA
   + Лекция 7. SymPy. Многочлены и рациональные функции. Элементарные
     функции. Структура выражений. Решение
     уравнений. Ряды. Производные. Интегралы. Суммирование
     рядов. Пределы. Дифференциальные уравнения. Линейная
     алгебра. Собственные значения и векторы. Нормальная жорданова
     форма. Графики.
     http://www.inp.nsk.su/~grozin/python/sympy.html
     http://www.inp.nsk.su/~grozin/python/python7.html
     https://youtu.be/3wlt17m6kic
   + Лекция 8.
     iminuit.  
     http://www.inp.nsk.su/~grozin/python/minuit.html
     cython. Функции. Интерфейс к библиотеке на
     C. Структуры. cdef классы.  Интерфейс к библиотеке на C.
     http://www.inp.nsk.su/~grozin/python/python8.html
     https://youtu.be/_-jBgIJc5VU
   + Лекция 9. Интерфейс к библиотеке на C (продолжение).  pandas —
     пакет для статистической обработки данных. Series. DataFrame. sh
     — простой вызов shell-комманд. rpyc — remote python call. pyroot
     — интерфейс к пакету анализа данных в том числе и данных очень
     большого объёма ROOT (http://root.cern.ch). 
     http://www.inp.nsk.su/~grozin/python/pandas.html
     http://www.inp.nsk.su/~grozin/python/
     https://youtu.be/mWK7EeYZwjY
 * Семинары теоретического отдела TO
   + к.ф.-м.н. Резниченко А.В. (ИЯФ СО РАН). «Исследование нелинейных
     каналов связи» (24.12.2015). https://youtu.be/VM4uB-r3sSQ
   + к.ф.-м.н. Козлов Михаил Геннадьевич (ИЯФ СО РАН). «Диаграмма
     "Пентагон" в произвольной размерности из дифференциальных
     уравнений в эпсилон-форме» (17.12.2015). 
     https://youtu.be/a2F_acIbQDU
   + д.ф.-м.н. Д. Шепелянский (CNRS, Toulouse) "Dynamical
     thermalization in finite interacting systems" (15.10.2015).
     https://youtu.be/MdVY22T3ggU
   + Ярослав Харьков (University of New South Wales, Sydney,
     Australia). "Spin-charge separation: impurity induced
     magnetization in the vicinity of quantum critical point"
     (16.07.2015) https://youtu.be/gyYgdiq9HT4
   + д.ф.-м.н. А.Г. Грозин (ИЯФ СО РАН). "Трехпетлевая аномальная
     размерность излома Вильсоновской линии"(12.03.2015).
   + Tomoki Morokuma (University of Tokyo), Nozomu Tominaga (Konan
     University). "Rapid Transient Phenomena Discovered in Wide-Field
     Surveys" (11.03.2015)
   + д.ф.-м.н. Р.Н. Ли (ИЯФ СО РАН). "Приведение дифференциальных
     уравнений для многопетлевых интегралов к ε-форме" (05.03.2015).
   + д.ф.-м.н. Д. Шепелянский (CNRS, Toulouse). "Google matrix of
     world trade nerwork" (18.12.2014)
   + проф. А.Д. Долгов (университет Феррары, ИТЭФ, НГУ). "Проблемы
     космологии и физика частиц." (09.12.2014).
   + М.Ш. Поташов (ИТЭФ, Москва). "Сверхновые II типа как инструмент
     для измерения космологических расстояний" (04.12.2014).
   + д.ф.-м.н. С.И. Блинников (ИТЭФ, Москва). "Сверхновые необычно
     высокой светимости и возможная связь их физики с
     гамма-всплесками" (03.12.2014).
   + к.ф.-м.н. С.И. Глазырин (ИТЭФ, Москва). "Физика горения
     сверхновых 1а" (02.12.2014).
   + к.ф.-м.н. А.В. Юдин (ИТЭФ, Москва). "Краткое введение в
     астрофизику звезд." (26.11.2014).
   + к.ф.-м.н. А.В. Юдин (ИТЭФ, Москва). "Сверхновые с коллапсом ядра
     и нейтронные звезды" (01.12.2014).
   + Парначев А. (Leiden U.), "Квантовое перепутывание в теориях поля" (29.05.2014).
   + Горский А.С. (ИТЭФ, Москва), "Барион как дионный инстантон"
     (28.05.2014).
   + Гелаш А.А., "Нелинейная стадия модуляционной неустойчивости"
     (22.05.2014).

*** сокращения

 * QCD   QCD_Lectures_Fadin_Spring_2014
 * QCDs  QCD_Seminars_Reznichenko_Spring_2015
 * QED   QED_Lectures_Fadin_Autumn_2013
 * QEDs  QED_Seminars_Reznichenko_Autumn_2015
 * EW    EW_Lectures_Chernyak_Autumn_2013
 * SUSY  SUSY_Lectures_Chernyak_Autumn_2013
 * HEP   HEP_Lectures_Serbo_Autumn_2013
 * HEPs  HEP_Seminars_Skovpen_Autumn_2014
 * NaCD  Nonlinear_and_Chaotic_Dynamics_Lectures_Zhirov_Spring_2014
 * GG    Gamma-Gamma_Serbo_Lecture_Autumn_2014
 * NUC   Nucleus_Dmitriev_Lecture_Autumn_2014
 * STR   Strings_Lectures_Pomeransky
 * ASTRO AstroPh_Lectures_Dolgov_Spring_2015
 * ANTAR Astrophysics_in_Antarctica_Lectures_Besson_Spring_2015
 * Python Python_Lectures_Grozin_Autumn_2015
 * TO    TO_seminars

** Лицензия

Видеолекции и всё к ним здесь прилагающееся, доступны по лицензии
Creative Commons «Attribution-ShareAlike» («Атрибуция — На тех же
условиях») 4.0 Всемирная. 

http://creativecommons.org/licenses/by-sa/4.0/

В вольны свободно использовать и модифицировать их при условии
сохранения этой лицензии на производные.

** Спасибо

Тем, кто сделал запись возможной, добавлял информацию и записывал сами
лекции: Алексею Резниченко, Андрею Грабовскому, Ирине Соколовой,
Роману Герасимову, Виталию Воробьеву  и Александру Руденко.

Тем, кто распространял информацию о лекциях и сами лекции, а также
терпеливо разъяснял на форумах linux.org.ru, как это всё ужать.

** Среда для сжатия и сборки видеофайлов лекций

Файлов слишком много, чтобы делать это в ручном режиме, поэтому была
написана простая обёртка для автоматического сжатия и сборки
видеофайлов лекций.

Основные параметры сборки перечислены в файле rules.mk 

Исполняемый файл ffmpeg по умолчанию размещается в директории
bin. Нужно убедиться, что для него установлено разрешение на
исполнение (chmod +x). 

Исходники для заставки лежат в директории Cover. Компиляция
проводилась в окружении  дистрибутива TeX Live 2013.

Скрипты moviemake* в корневой директории являются «костылём» для
запуска процедуры упаковки на кластере.

*** moviemake

Список лекций перечислен в lectureslist.txt. Формат файла: Номер
(используется для идентификации файла по номеру задания на кластере),
директория, имя файла лекции без расширения. Разделителем является
пробел. В имени файла и директории не может быть пробельных
символов. Можно оставлять комментарии за символом #

moviemake-batch.pl предназначен для запуска на кластере. В зависимости
от номера в массиве заданий (ключик -t команды qsub) он запускает
сборку конкретного файла, список которых можно передать через ключик
-l (по умолчанию lectureslist.txt). Расширение выходного файла можно
передать через ключик -e (по умолчанию mp4)

./moviemake-batch.pl 
Usage: ./moviemake-batch.pl [-l lectureslist.txt] [-e ext] (for batch only!)
Options: -l - lectures list (def. lectureslist.txt)
Options: -e - output file extention (def. mp4) 
Options: -h - help message

./moviemake.pl позволяет натравливать ./moviemake-batch.pl на
конкретные курсы, при этом можно указать диапазон лекций, который
нужно обработать. Удобно как для сборки всего, так и для добавления
новых файлов. 

./moviemake.pl 
Usage: ./moviemake.pl [-h] [-a || -t ABBR]
Options: -h - help message
Options: -a - convert all lectures
Options: -c ABBR - convert specific course
Options:    ABBR could be ASTRO, QCD(s), QED, SUSY, EW, NaCD, HEP(s), GG, NUC, STR
Options: -f INT - number of the first videofile (def. 1)
Options: -t INT - number of the last videofile 

*** mktorrent.pl

В data.pm описаны директория до данных, комментарии к торрент-файлам и
их имена, а также пути до базовых директорий и список треккеров.

mktorrent.pl -- простейший скрипт, который готовит все торрент-файлы.

** Создание торрент-файла

transmission-create --comment "NSU Lectures on Physics (1080p libx264 ac3)
http://www.inp.nsk.su/students/theor/videolectures/videolectures.html
License CC-BY-SA" --outfile NSUphyslect1080p-140613.torrent --tracker
 udp://tracker.openbittorrent.com:80 /Space/Lectures/1080p-140613/

Раньше использовался другой сервис для анонсирования:
udp://tracker.publicbt.com:80, но с ним что-то случилось.

** Закачка на YouTube
Через интерфейс google. Закачка из командной строки дала дуба.

Закачка производится через скрипт sendtoyoutube.pl 

Первый раз производится авторизация, затем закачка происходит
автоматически. Совершенно непонятно как выбирается канал для закачки.

Понятно — случайным образом, точнее googlecl заброшен и не знает что
такое каналы, привязанные к google-pages+ (возможно опять что-то
«улучшили и система поломалась»).

Для указания канала нужно добавить --user=lekcii-po-teore-5099
(страничка google+ -- в неё нужно зайти) и для того, чтобы
аутентификация прошла нужно, поправить исходник
/usr/lib/python2.7/dist-packages/googlecl/authentication.py , а именно
заменить в одном месте gmail.com на pages.plusgoogle.com примерно так:

    if given_account.find('@') == -1:
#      given_account += '@gmail.com'
      given_account += '@pages.plusgoogle.com'

** TODO [2/14]
 * [X] Переименовать директории следуя именованию директорий в torrent
 * [ ] Сделать глобальную автоматическую чистку от промежуточных файлов.
 * [ ] Разделить сборку и файлы.
 * [ ] Увеличить степень сжатия (это можно как минимум на 30%)
 * [ ] Сделать автоматическую генерацию всех обложек
 * [ ] Сделать генерацию как 1080, так и 720 в зависимости от опции
   moviemake.pl
 * [ ] Добавить magnet links
 * [X] Переименовать имена лекций на YouTube
 * [ ] Выложить исходники на git, а видеофайлы прикрутить туда через
   git-lfs. Стартовать отсюда:
   http://www.opennet.ru/opennews/art.shtml?num=42003
 * [ ] разобраться с git-annex
 * [ ] Приглядеться к git-lab
   https://about.gitlab.com/2015/02/17/gitlab-annex-solves-the-problem-of-versioning-large-binaries-with-git/
   https://about.gitlab.com/2015/04/08/gitlab-dot-com-storage-limit-raised-to-10gb-per-repo/
 * [ ] Выложить ссылки на rutracker
 * [ ] Для каждого итого файла нужен свой _afterwords.tex, так как
   иначе возникают коллизии при параллельной сборке файлов.
 * [ ] Разобраться с github
       git config credential.helper store
*** rutracker
Добавляем в рубрику Образование: http://rutracker.org/forum/viewforum.php?f=614

QCD Fadin: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5069896
   720p http://rutracker.org/forum/viewtopic.php?t=5071311
    src 
QCDs Reznichenko: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070081
   720p
    src
QED Fadin: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070157
   720p 
    src
EW Chernyak: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070167
   720p
    src
SUSE Chernyak: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070179
   720p
    src
HEP Serbo: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070200
   720p
    src
HEP Skovpen: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070215
   720p
    src
NaCD Zhirov: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070223
   720p
    src
GG Serbo: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070240
   720p
    src
NUC Dmitriev: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070722
   720p
    src
Strings Pomeranchuk: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070746
   720p
    src
ASTRO Dolgov: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070801
   720p
    src
Antarctic Besson: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070814
   720p
    src
TO: 
  1080p http://rutracker.org/forum/viewtopic.php?t=5070825
   720p
    src

Скармливаем rutracker тот же torrent-файл, что и подготовленный для
списка с bittorent.com. Скачиваем с rutracker и заменяем (удаляем и
добавляем новый) исходный торрент-файл на сервере transmission. В
крайнем случае добавляем новые сайты с помощью
#+BEGIN_SRC sh
transmission-edit -a <url> file.torrent
#+END_SRC
addfile.sh:
#+BEGIN_SRC sh
#!/bin/bash
filename="$1"
transmission-edit -a udp://tracker.openbittorrent.com:80 $filename
transmission-edit -a udp://open.demonii.com:1337 $filename
transmission-edit -a udp://tracker.coppersurfer.tk:6969 $filename
transmission-edit -a udp://tracker.leechers-paradise.org:6969 $filename
#+END_SRC



**** mediainfo
получение информации
#+BEGIN_SRC sh
mediainfo *.mp4 > mediainfo.log
#+END_SRC
Все директории
#+BEGIN_SRC sh
for d in ./*/ ; do (cd "$d" && mediainfo *.mp4 > mediainfo.log); done
#+END_SRC
Извлечение информации о времени исполнения файла
#+BEGIN_SRC sh
grep Duration mediainfo.log | sed 's/Duration                                 : //' | sed 's/h /*60+/' | sed 's/mn//'
#+END_SRC
Далее скопировать результат в bc (по три строчки на файл) и поделить на 60
**** screenshoots
#+BEGIN_SRC sh
ls -1 | xargs -n1 ./makescreens.sh
#+END_SRC

cat makescreens.sh

#+BEGIN_SRC sh
#!/bin/bash
# Description: Automatically take 8 screenshots of a video using mplayer
#              Screenshots are saved in 01.png, 02.png, ..., 08.png
# Author: Xuan Ngo
# Usage: ./thisScript.sh VideoFilename
# Requirements: mplayer, grep, sed
 
filename="$1"
 
# For some unknown reason, the last screenshot is not generated by mplayer.
# Therefore, always add 1 more to the total number of screenshots that you want.
NUM_OF_SCREENSHOTS=4
 
# Get the total length of the video in seconds.
#  Use mplayer to display the info of the video and then get the value of ID_LENGTH, the total number of seconds of the video.
total_length=$(mplayer -identify -frames 0 -vc null -vo null -ao null ${filename} | grep ID_LENGTH | sed 's/ID_LENGTH=//' | sed 's/\..*//')
 
# Remove 60 seconds from the video so that it doesn't take screenshot at the ends.
let total_length-=60
 
# time_slice: At which time interval should mplayer take screenshots.
let time_slice=${total_length}/${NUM_OF_SCREENSHOTS}
 
# time_at: When should mplayer take screenshots.
time_at=${time_slice};
 
# Looping to take screenshots.
for ((i=1; i <= NUM_OF_SCREENSHOTS ; i++))
do
 
  # Create unique filename.
  padding=$(printf %s-%02d $filename ${i})
 
  # Take the screenshot.
  mplayer -nosound -ss ${time_at} -vf screenshot -frames 1 -vo jpeg ${filename}

  # -vo jpeg:outdir=screens/
 
  # Increment to the next time slice.
  let time_at+=${time_slice}
 
  # Move the screenshot 00000001.png to 0X.png
  mv 00000001.jpg ${padding}.jpg
 
done
#+END_SRC

Пробегаем по всем директориям из /Space1/Lectures/torrent/

#+BEGIN_SRC sh
for d in ./*/ ; do (cd "$d" && ls -1 | xargs -n1 ../makescreens.sh); done
#+END_SRC


*** magnet links
http://www.opennet.ru/opennews/art.shtml?num=41258#69

Сначала создать торрент-файл, а потом:

transmission-show -m /path/to/torrent/file.torrent

Магнитная ссылка не заменяет торрент-файл, она просто позволяет
торрент-клиенту скачать его у других пиров, безо всякого
сервера. Поэтому торрент-файл должен существовать, но выкладывать его
куда-то не обязательно.

Все параметры, кроме "xt=", опциональны, и их можно удалить, если
хочется сократить ссылку. Хотя с ними удобнее. Параметр "xt="
позволяет клиенту найти пиров и скачать торрент-файл, "dn=" позволяет
заранее, до получения торрент-файла, знать, как называется торрент и
правильно отображать его в списке, а "tr=" - использовать для поиска
пиров трекер вместо более медленного DHT.

Пример:

$ transmission-show -m NSUphyslect-QCD-Fadin-720p.torrent
magnet:?xt=urn:btih:364d7ee5bccf6decce765a497a141e4eb80d24c1&dn=QCD%5FLectures%5FFadin%5FSpring%5F2014%5F%28720p%29&tr=udp%3A%2F%2Ftracker.openbittorrent.com%3A80&tr=udp%3A%2F%2Ftracker.publicbt.com%3A80&tr=udp%3A%2F%2Ftracker.istole.it%3A80&tr=udp%3A%2F%2Ftracker.ccc.de%3A80

можно сократить до:

magnet:?xt=urn:btih:364d7ee5bccf6decce765a497a141e4eb80d24c1&dn=QCD%5FLectures%5FFadin%5FSpring%5F2014%5F%28720p%29&tr=udp%3A%2F%2Ftracker.publicbt.com%3A80

или

magnet:?xt=urn:btih:364d7ee5bccf6decce765a497a141e4eb80d24c1&dn=QCD%5FLectures%5FFadin%5FSpring%5F2014%5F%28720p%29

или даже

magnet:?xt=urn:btih:364d7ee5bccf6decce765a497a141e4eb80d24c1

** Обратная связь

В проекте на разных его стадиях участвовали

Андрей Грабовский (лидер проекта) agrabovsky@gmail.com, 8-962-839-96-37
Алексей Резниченко (замлидера) A.V.Reznichenko@inp.nsk.su, 8-913-946-45-55
Евгений Балдин (торренты и сжатие видеофайлов)  E.M.Baldin@inp.nsk.su
Виталий Воробьев 
Роман Герасимов
Александр Руденко
Ирина Соколова

Сайт проекта:

http://www.inp.nsk.su/students/theor/videolectures/videolectures.html

или

http://www.inp.nsk.su/~baldin/PhysLect/index.html
